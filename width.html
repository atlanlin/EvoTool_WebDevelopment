<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=0.7">
    <title>Width Measurement</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="jquery.js"></script>
	<script src="html2canvas.min.js"></script>
    <script src="evt.js"></script>
    <script src="camset.js"></script>
	<script src="rectwitharrow.js"></script>
	
	
    
</head>
<body onload="init2()">
	<label id="warning-message">This webpage is best used when it is in landscape mode.</label>
    <img id="logo" src="vclogo.png" alt="vclogo"> 
    <div class="functionPanel">
		<div id="rightRegion">
			<div>
				<button id="btnStart" type="button" class="button">Monitor</button>
				<button id="btnStop" type="button" class="button">Stop</button>
				<button id="home" type="button" class="button" onClick="location.href='control.html'">Control Page</button>
			</div>
			
			<p class="fHeading1">Result</p>
             <div id="resultDetail">
                <textarea id="resultDisplay" rows="6" cols="15" readonly></textarea>
				<input id="btnMeasure" type="button" value="Get Result" class="button">
            </div>
			<!--
			<div id="objectMeasureTools" class="functionTab">
				<p class="fHeading1">Object Measurement Tools</p>
				
				<img id="circleImgBtn" class="imageButton" src="circleImgBtn.jpg" 
					onclick="clickedImgBtn(this.id)"></img>
				<img id="widthImgBtn" class="imageButton" src="widthImgBtn.jpg" 
					onclick="clickedImgBtn(this.id)"></img>
				
			</div>
			
			<div id="distanceMeasureTools" class="functionTab">
				<p class="fHeading1">Distance Measurement Tools</p>
				
				<img id="ptpImgBtn" class="imageButton" src="ptpImgBtn.jpg" 
					onclick="clickedImgBtn(this.id)"></img>
				<img id="ptlImgBtn" class="imageButton" src="ptlImgBtn.jpg" 
					onclick="clickedImgBtn(this.id)"></img>
				<img id="ptcImgBtn" class="imageButton" src="ptcImgBtn.jpg" 
					onclick="clickedImgBtn(this.id)"></img>
				<img id="ctlImgBtn" class="imageButton" src="ctlImgBtn.jpg" 
					onclick="clickedImgBtn(this.id)"></img>
				<img id="ctcImgBtn" class="imageButton" src="ctcImgBtn.jpg" 
					onclick="clickedImgBtn(this.id)"></img>
				
			</div>
			-->
		</div>
        <div id="imageArea">
			<div id="mainTitle">Width Measurement</div>
			
			<img id="imgSnapshot"></img>
			
			<canvas id="canvas2" style="z-index: 1; position:absolute; left:0px; top:27px;" width="752" height="480">
			Your browser does not support HTML5 Canvas. Please use latest version.
			</canvas>
			
		 </div>
		 
        
        <div id="leftmenu">	
			<label class="fHeading1">Settings</label>
			
			<div id="evoWidthSettings" class="functionTab">
				
				<table>
					<tr>
						<td>
							<p margin-left="0px" class="fHeading2">Measurement Options</p>
							
						</td>
						<td>
							<select name="selectOption" id="dbOption">
								  <option value="width">Width</option>
								  <option value="gap">Gap</option>
								  <option value="pitch">Pitch</option>
								  <option value="count">Count</option>
							</select>
							
						</td>
					</tr>
					<tr>
						<td>
							<p class="fHeading2">Object Dark Color</p>
						</td>
						<td>
							<input type="checkbox" id="cbObjectColor" value="dark" checked>
						</td>
					</tr>
					<tr>
						<td>
							<p class="fHeading2">Horizontal Arrow</p>
						</td>
						<td>
							<input type="checkbox" id="cbArrowHor" checked>
						</td>
					</tr>
				</table>
			</div>
			<hr>
			
			<label class="fHeading1">ROI</label>
			<div class="functionTab">
				
				
				
				<table border="0">
					<tr>
						<td>StartX</td>
						<td>
							<input id="tbStartX" class="textBox" type="text">
						</td>
						<td>EndX</td>
						<td>
							<input id="tbEndX" class="textBox" type="text">
						</td>
					</tr>
					
					<tr>
						<td>StartY</td>
						<td>
							<input id="tbStartY" class="textBox" type="text">
						</td>
						<td>EndY</td>
						<td>
							<input id="tbEndY" class="textBox" type="text">
						</td>
					</tr>
					
					<tr>
						<td>Width</td>
						<td colspan="3">
							
							<input id="tbWidth" class="textBoxLong" type="text"><br>
						</td>
					</tr>
					
					
				</table>
			</div>
			<hr>
			<label class="fHeading1">Tolerance</label>
			<div class="functionTab">
				
				<table class="toleranceTable">
					<tr> 
					<td><label>Nominal Value</label></td>
					<td><input type="number" id="nv" value="0" name="tolerance" ></td> </tr>
					<tr> 
					<td>+</td>
					<td><input type="number" id="plus" value="10000" name="tolerance" min="0"> </td> </tr>
					<tr> 
					<td>-</td>
					<td><input type="number" id="minus" value="0" name="tolerance" min="0"> </td> </tr>
				</table>
			</div>
			
			<hr>
			
			
			
        </div>
		<div id="commuStatus" style="display:none;"/>
		
	</div>
		
	<script>
		var EVO_UPDATE_INTERVAL = 2000;
		//enable width command in evo 3
		ajaxGet("info.htm?cmd=%23021%3BEVO Width%3B2%3BGeneral.Enabled%3B1%23");
		ajaxGet("info.htm?cmd=%23021%3BINI Width%3B2%3BGeneral.Enabled%3B1%23");
		
		//send parameters to evo 3
		function updateParameters(){
		
			
			var sx = document.getElementById("tbStartX").value;
			var sy = document.getElementById("tbStartY").value;
			var ex = document.getElementById("tbEndX").value;
			var ey = document.getElementById("tbEndY").value;
			var width = document.getElementById("tbWidth").value;
			
			var color, option;
			if(document.getElementById("cbObjectColor").checked){
				color = 1;
			}else{
				color = 0;
			}
			
			
			var optVal = document.getElementById("dbOption").value;
			if(optVal == "width")
				option = 0;
			else if(optVal == "gap")
				option = 1;
			else if(optVal == "pitch")
				option = 2;
			else
				option = 3;
			
			
			ajaxGet("info.htm?cmd=%23021%3BEVO Width%3B1%3BRecPos.PointStart.X%3B" + sx +"%23");
			ajaxGet("info.htm?cmd=%23021%3BEVO Width%3B1%3BRecPos.PointStart.Y%3B" + sy +"%23");
			ajaxGet("info.htm?cmd=%23021%3BEVO Width%3B1%3BRecPos.PointEnd.X%3B" + ex +"%23");
			ajaxGet("info.htm?cmd=%23021%3BEVO Width%3B1%3BRecPos.PointEnd.Y%3B" + ey +"%23");
			ajaxGet("info.htm?cmd=%23021%3BEVO Width%3B1%3BRecPos.Width%3B" + width +"%23");
			ajaxGet("info.htm?cmd=%23021%3BEVO Width%3B2%3BObjColor%3B" + color +"%23");
			ajaxGet("info.htm?cmd=%23021%3BEVO Width%3B2%3BMeasureOption%3B" + option +"%23");
			
		}
		
		$("#btnMeasure").click(function(){
			updateParameters();
			ajaxGet("cfg.ini", getValueFrominiFile);
			saveScreenshot();
		});
		
		setInterval(updateParameters, EVO_UPDATE_INTERVAL);
		
	</script>
</body>
</html>