<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Setting</title>
	<link rel="stylesheet" type="text/css" href="style.css">
    <script src="jquery.js"></script> 
    <script src="evt.js"></script>
    <script src="camset.js"></script>
	
	<style>
		label{
			font-size: 16px;
			margin-left: 10px;
		}
		input[type="range"]{
			margin-left: 15px;
		}
		.subHeading{
			font-size: 24px;
			font-weight:bold;
			color:#003399;
		}
		input[type="button"]{
			margin-left:auto;
			margin-right:auto;
		}
		.disableElement{
			color:#C0C0C0;
		}
	</style>
    
</head>
<body>
    <img id="logo" src="vclogo.png" alt="vclogo">
	
    <div class="functionPanel"> 
        <div id="rightRegion">
            <div>
                <input id="btnStart" type="button" value="Monitor" class="button">
                <input id="btnStop" type="button" value="Stop" class="button">
                <input id="mainPage" onClick="location.href='index.htm'" type="button" value="Main Page" class="button">
            </div>  
			
			
        </div>
       <div id="imageArea">
            <div id="mainTitle">Settings</div>
			
			<img id="imgSnapshot"></img>			
			
            <!-- <img id="imgSnapshot"></img> -->
       </div>
	   
        <div id="leftmenu"> 
          
			<label class="subHeading">Camera Settings</label><br><br>
			<div class="functionTab">
				
				<label class="disableElement" for="rGain">Gain:</label>
				<input class="disableElement" type="text" id="txtGain" value="20" style="width: 30px" readonly/><br>
				<input class="disableElement" type="range" name="rGain" id="rGain" value="20" min="0" max="100" oninput="changeRangeValue(this)"><br><br>
				<label class="disableElement" for="rShuuter">Shutter:</label>
				<input class="disableElement" type="text" id="txtShutter" value="20" style="width: 30px" readonly/><br>
				<input class="disableElement" type="range" name="rShutter" id="rShutter" value="20" min="0" max="100" oninput="changeRangeValue(this)">
				<br><br>
				<label class="disableElement" >Resolution</label>
				<select class="disableElement" id="resSelectBox">
					<option>640x480</option>
					<option>1024x768</option>
					<option>2592x1944</option>
				</select>
				<hr>
				<label style="margin-left:0px; font-size:20px;"><b>CKP File Name</b></label><br>
				<label>Code Filename</label><br>
				<input type="text" id="tbCodeReader" style="margin-left:10px; width:auto;"/><br><br>
				<label>Measurement Filename</label><br>
				<input type="text" id="tbMeasurement" style="margin-left:10px; width:auto;"/><br>
				<hr>
				
				<label style="margin-left:0px; font-size:20px;"><b>Calibration</b></label><br>
				<label>X</label>
				<input type="text" id="tbCalxVal" style="width:70px;"/>
				<label>Y</label>
				<input type="text" id="tbCalyVal" style="width:70px;"/>
				<input id="btnSet" class="button" type="button" value="Set" onclick="setBtnClick()"/>
				<input id="btnCancel" class="button" type="button" value="Cancel" onclick="cancelBtnClick()" style="width:100px;"/>
			
			</div>
            
        </div>
		
	</div>
	<script>
		var resCookieVal;
		var calX, calY;
		var fileCR, fileMeasure;
		var COOKIE_DURATION = 365;
		restoreValues();
		
		
		
		function restoreValues(){
			//resCookieVal = getCookie("resolution");
			//document.getElementById("resSelectBox").selectedIndex = resCookieVal;
			
			//filename settings
			fileCR = getCookie("fileCR");
			fileMeasure = getCookie("fileMeasure");
			if(fileCR ===null){
				setCookie("fileCR", "Code_Reader", COOKIE_DURATION);
				document.getElementById("tbCodeReader").value = fileCR;
			}else{
				document.getElementById("tbCodeReader").value = fileCR;
			}
			
			if(fileMeasure ===null){
				setCookie("fileMeasure", "Measurement", COOKIE_DURATION);
				document.getElementById("tbMeasurement").value = fileMeasure;
			}else{
				document.getElementById("tbMeasurement").value = fileMeasure;
			}
			
			//calibration settings
			calX = getCookie("calX");
			calY = getCookie("calY");
			if(calX === null){
				setCookie("calX", 1, COOKIE_DURATION);
				document.getElementById("tbCalxVal").value = 1;
			}else{
				document.getElementById("tbCalxVal").value = calX;
			}
			
			if(calY === null){
				setCookie("calY", 1, COOKIE_DURATION);
				document.getElementById("tbCalyVal").value = 1;
			}else{
				document.getElementById("tbCalyVal").value = calY;
			}
		}
		
		function updateValuesToCookies(){
			//resCookieVal = document.getElementById("resSelectBox").selectedIndex;
			//setCookie("resolution",resCookieVal,COOKIE_DURATION);
		
			if(!updateCalValues())
				return false;
			return true;
		}
		
		function cancelValues(){
			//document.getElementById("resSelectBox").selectedIndex = resCookieVal;
			
			document.getElementById("tbCalxVal").value = calX;
			document.getElementById("tbCalyVal").value = calY;
		}
		
		function updateCalValues(){
			calX = document.getElementById("tbCalxVal").value;
			calY = document.getElementById("tbCalyVal").value;
			
			if(isNaN(calX))
				return false;
			if(isNaN(calY))
				return false;
			
			setCookie("calX", calX, COOKIE_DURATION);
			setCookie("calY", calY, COOKIE_DURATION);
			return true;
		}
		
		
		
		function changeRangeValue(rangeId){
			if(rangeId.id === "rGain"){
				document.getElementById("txtGain").value = rangeId.value;
			}else if(rangeId.id === "rShutter"){
				document.getElementById("txtShutter").value = rangeId.value;
			}
		}
		
		function setBtnClick(){
			if(updateValuesToCookies() === true)
				alert("updated successfully");
			else
				alert("wrong input values");
		}
		
		function cancelBtnClick(){
			cancelValues();
		}
		
		
		
		
		
		
		
		
		
		
	</script>
				
</body>


</html>
